"use strict";function UserAuth(a,b){var c=this;c.userData={},a.defaults.headers.common.Authorization="Basic "+Config.apiAuthorization,this.doLogin=function(d,e,f,g){a({method:"GET",url:Config.api+"login",headers:{username:d,password:e}}).then(function(d){d.data.data.hasOwnProperty("token")&&(localStorage.setItem("token",d.data.data.token),a.defaults.headers.common.token=d.data.data.token),d.data.data.hasOwnProperty("user")&&(localStorage.setItem("user",d.data.data.user),c.userData=d.data.data.user),b.refreshMenu(),"undefined"!=typeof f&&f(d)},function(a){console.log(a),"undefined"!=typeof g&&g(a)})},this.logout=function(b,d){localStorage.setItem("user",null),localStorage.setItem("token",null),delete a.defaults.headers.common.Authorization,delete a.defaults.headers.common.token,c.userData={},a({method:"POST",url:Config.api+"logout"}).then(function(d){c.userData={},delete a.defaults.headers.common.Authorization,delete a.defaults.headers.common.token,localStorage.setItem("user",null),localStorage.setItem("token",null),"undefined"!=typeof b&&b(d)},function(a){"undefined"!=typeof d&&d(a)})},this.isLoggedIn=function(c,d){return void 0==this.getUserData().role_name?d():void a({method:"GET",url:Config.api+"IsLoggedIn"}).then(function(a){b.showHeader=!0,b.showFooter=!0,b.refreshMenu(),"undefined"!=typeof c&&c(a)},function(a){"undefined"!=typeof d&&d(a)})},this.getUserData=function(){return this.userData},this.loggedUserIsSupervisor=function(){return this.userData.role_name==Config.roleNameSupervisor},this.loggedUserIsPromoter=function(){return this.userData.role_name==Config.roleNamePromoter},this.loggedUserIsDataEntry=function(){return this.userData.role_name==Config.roleNameDataEntry}}angular.module("sancorsaludApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider","UserAuthProvider","$httpProvider",function(a,b,c,d){a.when("/",{templateUrl:"views/login.html",controller:"LoginController",controllerAs:"login",resolve:{loggedin:["UserAuth","$q","$timeout","$location","$rootScope",function(a,b,c,d,e){var f=b.defer();return a.isLoggedIn(function(a){f.reject(),d.url(Config.publicPages.assignedToPromoter)},function(a){f.resolve()})}]}}).when(Config.publicPages.assignedToPromoter,{templateUrl:"views/assignedToPromoter.html",controller:"AssignedToPromoterController",controllerAs:"AssignedToPromoterController",resolve:{loggedin:["UserAuth","$q","$timeout","$location","$rootScope",function(a,b,c,d,e){var f=b.defer();return a.isLoggedIn(function(a){f.resolve()},function(a){f.reject(),d.url("/")})}]}}).when(Config.publicPages.promoterList,{templateUrl:"views/promoterlist.html",controller:"PromoterListController",controllerAs:"PromoterListController",resolve:{loggedin:["UserAuth","$q","$timeout","$location","$rootScope",function(a,b,c,d,e){var f=b.defer();return a.isLoggedIn(function(a){f.resolve()},function(a){f.reject(),d.url("/")})}]}}).when(Config.publicPages.toBeAssigned,{templateUrl:"views/toBeAssigned.html",controller:"TobeassignedcontrollerCtrl",controllerAs:"TobeassignedcontrollerCtrl",resolve:{loggedin:["UserAuth","$q","$timeout","$location","$rootScope",function(a,b,c,d,e){var f=b.defer();return a.isLoggedIn(function(a){f.resolve()},function(a){f.reject(),d.url("/")})}]}}).when(Config.publicPages.agenda,{templateUrl:"views/agenda.html",controller:"AgendaCtrl",resolve:{loggedin:["UserAuth","$q","$timeout","$location","$rootScope",function(a,b,c,d,e){var f=b.defer();return a.isLoggedIn(function(a){f.resolve()},function(a){f.reject(),d.url("/")})}]}}).when(Config.publicPages.newAssociatedPotential,{templateUrl:"views/newAssociatedPotential.html",controller:"NewAssociatedPotentialController",resolve:{loggedin:["UserAuth","$q","$timeout","$location","$rootScope",function(a,b,c,d,e){var f=b.defer();return a.isLoggedIn(function(a){f.resolve()},function(a){f.reject(),d.url("/")})}]}}).otherwise({redirectTo:"/"}),b.hashPrefix(""),null!=localStorage.getItem("token")&&(d.defaults.headers.common.token=localStorage.getItem("token")),d.defaults.withCredentials=!1,delete d.defaults.headers.common["X-Requested-With"],d.defaults.headers.post.Accept="application/json, text/javascript",d.defaults.headers.post["Content-Type"]="application/json; charset=utf-8",d.defaults.headers.common.Accept="application/json, text/javascript",d.defaults.headers.common["Content-Type"]="application/json; charset=utf-8",d.defaults.useXDomain=!0}]),angular.module("sancorsaludApp").controller("AssignedToPromoterController",["$rootScope","$scope","associatedPotentialService","UserAuth","utilsService",function(a,b,c,d,e){a.setActiveMenuPage("assignedToPromoter","Asignados"),a.showFilterMenu(),a.showSearchMenu(),b.modeEditActive=!1,b.userMessage="",b.associatedPotentialDialog=$("#asignado1"),b.valuedDialog=$("#cotizar-modal"),b.closeDialog=$("#close-dialog"),b.motives=[],c.getMotives(function(a){b.motives=a},function(a){console.log(a)}),b.valuation={plan:"",value:""},b.today=(new Date).toISOString().substring(0,10),b.filterSearchedData=function(a){if(""==b.filterText)return!0;var c="";return"none"!=$(".filtro .cotizados")[0].style.display&&(c="C"),"none"!=$(".filtro .entrevistados")[0].style.display&&(c="A"),"none"!=$(".filtro .sin-agendar")[0].style.display&&(c="S"),(a.nombre.toLowerCase().indexOf(b.filterText.toLowerCase())>=0||a.apellido.toLowerCase().indexOf(b.filterText.toLowerCase())>=0)&&(""==c||a.filtro==c)},b.filterText="";var f=function(){b.filterText=a.getSearchText()};e.registerObserverCallback(f,Config.events.onHeaderSearchTextChange),b.loadAssociatedPotential=function(){b.associatedPotentialList=[],b.loading=!0,d.loggedUserIsPromoter()&&c.getAssociatedPotentialListForPromoters(function(a){b.associatedPotentialList=a,b.welcomeMessage=b.refreshWelcomeMessage(a),setTimeout(function(){$(".item").hide(),$(".modal.asignados .item").show(),$(".filtro > div").hide(),$(".filtro .sin-agendar").show(),$('.item[data-filter="S"]').show()},300),b.loading=!1},function(a){b.loading=!1,console.log(a)})},e.registerObserverCallback(function(a){a==Config.publicPages.assignedToPromoter&&b.loadAssociatedPotential()},Config.events.onHeaderNavigatePageChange),b.loadAssociatedPotential(),b.refreshWelcomeMessage=function(a){for(var b=0,c=0;c<a.length;c++)a[c].fecha_asig_prom==e.getDateStringYYYYMMDD()&&b++;return b>0?"Hola "+d.getUserData().name+" "+d.getUserData().lastname+", hoy tienes "+b+" nuevo"+(b>1?"s":"")+" asignado"+(b>1?"s":"")+" a contactar.":"Hola "+d.getUserData().name+" "+d.getUserData().lastname+", hoy no tienes nuevos asignados"},b.editAssociatedPotential=function(){setTimeout(function(){$("#fecha-nacimiento").val(e.getDateDescription(b.selectedAssociatedPotencial.fecha_nac))},100),b.modeEditActive=!0},b.updateAssociatedPotential=function(){if(b.userMessage="",e.isNullOrEmpty($("#fecha-nacimiento").val()))return void(b.userMessage="Debe completar la fecha de nacimiento");if(e.isNullOrEmpty(b.selectedAssociatedPotencial.perfil.celular)&&e.isNullOrEmpty(b.selectedAssociatedPotencial.perfil.tel))return void(b.userMessage="Debe completar o un teléfono o un celular al menos");var a={};a.potencial_id=b.selectedAssociatedPotencial.potencial_id,a.nombre=b.selectedAssociatedPotencial.nombre,a.apellido=b.selectedAssociatedPotencial.apellido,a.fecha_nac=e.buildLocalDateTime($("#fecha-nacimiento").val(),""),e.isNotNull(b.selectedAssociatedPotencial.perfil.cp)&&(a.cp=b.selectedAssociatedPotencial.perfil.cp),e.isNotNull(b.selectedAssociatedPotencial.perfil.tel)&&(a.tel=b.selectedAssociatedPotencial.perfil.tel),e.isNotNull(b.selectedAssociatedPotencial.perfil.celular)&&(a.cel=b.selectedAssociatedPotencial.perfil.celular),e.isNotNull(b.selectedAssociatedPotencial.mail)&&(a.mail=b.selectedAssociatedPotencial.mail),e.isNotNull(b.selectedAssociatedPotencial.perfil.calle)&&(a.calle=b.selectedAssociatedPotencial.perfil.calle),e.isNotNull(b.selectedAssociatedPotencial.perfil.puerta)&&(a.puerta=b.selectedAssociatedPotencial.perfil.puerta),e.isNotNull(b.selectedAssociatedPotencial.perfil.piso)&&(a.piso=b.selectedAssociatedPotencial.perfil.piso),e.isNotNull(b.selectedAssociatedPotencial.perfil.departamento)&&(a.departamento=b.selectedAssociatedPotencial.perfil.departamento),c.updateAssociatedPotential(a,function(a){b.modeEditActive=!1,b.associatedPotentialDialog.modal("toggle"),b.loadAssociatedPotential()},function(a){b.userMessage="No se ha podido modificar el potencial asociado"})},b.cancelEditAssociatedPotential=function(){setTimeout(function(){$("#fecha-entrevista").val(e.getDateDescription(b.selectedAssociatedPotencial.fecha_agenda))},100),setTimeout(function(){$("#hora-entrevista").val(e.getTimeDescription(b.selectedAssociatedPotencial.fecha_agenda))},100),b.userMessage="",b.modeEditActive=!1},b.selectedAssociatedPotencial=null,b.setSelectedAssociatedPotencial=function(a){b.modeEditActive=!1;var d=angular.copy(a);b.selectedAssociatedPotencial=d,$("#fecha-entrevista").val(""),$("#hora-entrevista").val(""),$("#fecha-nacimiento").val(""),e.isNotNull(a.fecha_agenda)&&($("#fecha-entrevista").val(e.getDateDescription(a.fecha_agenda)),$("#hora-entrevista").val(e.getTimeDescription(a.fecha_agenda))),e.isNotNull(a.fecha_nac)&&(b.selectedAssociatedPotencial.fecha_nac=e.getDateDescription(a.fecha_nac),setTimeout(function(){$("#fecha-nacimiento").val(e.getDateDescription(a.fecha_nac))},100)),c.getAssociatedPotentialPerfil(a.potencial_id,function(a){d.perfil=a},function(a){b.selectedAssociatedPotencial=d})},b.getDetailsMessage=function(a){if("A"==a.filtro)return new Date(a.fecha_agenda).getMonth()==(new Date).getMonth()?e.formatDateDayTextPlusTime(new Date(a.fecha_agenda)):e.formatDateCompleteTextPlusTime(new Date(a.fecha_agenda));if("S"==a.filtro){var b=e.getDaysBetweenTwoDates(e.getStringDate(new Date),a.fecha_asig_prom);return b>=Config.maxDaysPotentialCanBeAssigned?"VENCE HOY":"NUEVO - "+(Config.maxDaysPotentialCanBeAssigned-b)+" días para contactar"}return""},b.getDateDescription=function(a){return e.getDateDescription(a)},b.getTimeDescription=function(a){return e.getTimeDescription(a)},b.showIconWarningExpiredDate=function(a){var b=e.getDaysBetweenTwoDates(e.getStringDate(new Date),a.fecha_asig_prom);return b>=Config.maxDaysPotentialCanBeAssigned},b.showIconAgenda=function(a){return e.isNotNull(a)?"A"==a.filtro:!1},b.showIconNotAgenda=function(a){return e.isNotNull(a)?"S"==a.filtro:!1},b.showIconValued=function(a){return e.isNotNull(a)?"C"==a.filtro:!1},b.closeAssociatedPotential=function(){parseInt(b.selectedAssociatedPotencial.motive)>0&&c.closeAssociatedPotential(b.selectedAssociatedPotencial.potencial_id,parseInt(b.selectedAssociatedPotencial.motive),function(a){b.loadAssociatedPotential(),b.closeDialog.modal("toggle"),b.associatedPotentialDialog.modal("toggle")},function(a){b.userMessage="No se ha podido cerrar el potencial asociado",console.log(a)})},b.saveAssociatedPotentialAgenda=function(){return b.selectedAssociatedPotencial.fecha_agenda=e.buildLocalDateTime(new Date($("#fecha-entrevista")[0].valueAsDate).toISOString(),$("#hora-entrevista").val()),b.userMessage="",new Date(b.selectedAssociatedPotencial.fecha_agenda).getTime()<(new Date).getTime()?void(b.userMessage="La fecha de entrevista debe ser posterior a la actual"):void c.saveAssociatedPotentialAgenda(b.selectedAssociatedPotencial,function(a){b.loadAssociatedPotential(),b.associatedPotentialDialog.modal("toggle")},function(a){b.userMessage="No se ha podido guardar el potencial asociado",console.log(a)})},b.valuedAssociatedPotential=function(){c.valuedAssociatedPotential(b.selectedAssociatedPotencial,b.valuation,function(a){b.valuedDialog.modal("toggle"),b.associatedPotentialDialog.modal("toggle"),b.loadAssociatedPotential()},function(a){b.valuedDialog.modal("toggle"),b.associatedPotentialDialog.modal("toggle"),b.userMessage="No se ha podido cotizar el potencial asociado",console.log(a)})},b.getState=function(a){return a.filtro}}]),angular.module("sancorsaludApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("sancorsaludApp").directive("header",["UserAuth","$location","$rootScope","$interval","utilsService","associatedPotentialService",function(a,b,c,d,e,f){return{templateUrl:"views/templates/headerTemplate.html",restrict:"E",scope:!0,link:function(g,h,i){g.searchText="",c.getSearchText=function(){return g.searchText},g.reload=function(a){e.notifyObservers(Config.events.onHeaderNavigatePageChange,a)},g.changeSearchText=function(a){g.searchText=a,e.notifyObservers(Config.events.onHeaderSearchTextChange,g.searchText)},g.getPublicPages=function(){return Config.publicPages},g.notifications={assignedCount:"",pendingCount:""},g.updateNotifications=function(){$(".badge-notification").show(),a.loggedUserIsSupervisor()&&f.getAssignedAndPendingCountForSupervisor(function(a){g.notifications.assignedCount=a.cantidad_pendientes,g.notifications.pendingCount=a.cantidad},function(){$(".badge-notification").hide()}),a.loggedUserIsPromoter()&&f.getAssignedAndPendingCountForPromoter(function(a){g.notifications.assignedCount=a.cantidadAsignados,g.notifications.pendingCount=a.cantidadPendientes},function(){$(".badge-notification").hide()})},d(g.updateNotifications,Config.refreshNotificationsMilliseconds),c.refreshMenu=function(){g.username=a.getUserData().name+" "+a.getUserData().lastname,g.name=a.getUserData().name,g.roleName=a.getUserData().role_name,g.showSupervisorMenu=a.loggedUserIsSupervisor(),g.showPromoterMenu=a.loggedUserIsPromoter(),g.updateNotifications()},g.isFilterMenuVisible=!1,c.showFilterMenu=function(){g.isFilterMenuVisible=!0},c.hideFilterMenu=function(){g.isFilterMenuVisible=!1},g.isSearchMenuVisible=!1,c.showSearchMenu=function(){g.isSearchMenuVisible=!0},c.hideSearchMenu=function(){g.isSearchMenuVisible=!1},g.page="",c.setActiveMenuPage=function(a,b){$("li.active").removeClass(),$("#"+a+"Menu").addClass("active"),g.page=b},g.logout=function(){a.logout(function(){b.path("/")},function(a){b.path("/")})}}}}]),angular.module("sancorsaludApp").controller("LoginController",["$scope","$rootScope","UserAuth","$location",function(a,b,c,d){b.showHeader=!1,b.showFooter=!1,a.userData={username:"fpaz",password:"2016"},a.message="",a.doLogin=function(){a.message="",0===a.userData.username.length?alert("warning : Please complete your email"):0===a.userData.password.length?alert("warning : Please complete your password"):c.doLogin(a.userData.username,a.userData.password,function(){c.loggedUserIsSupervisor()?(b.showSearchMenu(),b.hideFilterMenu(),d.path(Config.publicPages.toBeAssigned)):(b.showSearchMenu(),b.showFilterMenu(),d.path(Config.publicPages.assignedToPromoter))},function(b){console.log("login incorrecto"),a.message="No se ha podido autenticar. Valide su usuario y contraseña por favor."})}}]),angular.module("sancorsaludApp").provider("UserAuth",function(){this.$get=["$http","$rootScope",function(a,b){return new UserAuth(a,b)}]}),angular.module("sancorsaludApp").directive("footer",function(){return{template:"<div></div>",restrict:"E",link:function(a,b,c){}}}),angular.module("sancorsaludApp").controller("AgendaCtrl",["$rootScope","$scope","$window","associatedPotentialService","UserAuth","utilsService",function(a,b,c,d,e,f){a.setActiveMenuPage("agenda","Agenda"),a.hideFilterMenu(),a.showSearchMenu(),b.filterSearchedData=function(a){return""==b.filterText?!0:a.nombre.toLowerCase().indexOf(b.filterText.toLowerCase())>=0||a.apellido.toLowerCase().indexOf(b.filterText.toLowerCase())>=0},b.filterText="";var g=function(){b.filterText=a.getSearchText()};f.registerObserverCallback(g,Config.events.onHeaderSearchTextChange),b.loadAgenda=function(){b.associatedPotentialAssignedList={},b.loading=!0,e.loggedUserIsPromoter()&&d.getAssociatedPotentialListForPromoters(function(a){var c=[];a.forEach(function(a){f.isNotNull(a.fecha_agenda)&&c.push(a)}),c.sort(function(a,b){return void 0==a.fecha_agenda?-1:void 0==b.fecha_agenda?-1:new Date(b.fecha_agenda)-new Date(a.fecha_agenda)}),c.reverse(),c.forEach(function(a){if(f.isNotNull(a.fecha_agenda)){var c=f.getDateStringYYYYMMDD(new Date(a.fecha_agenda));null==b.associatedPotentialAssignedList[c]&&(b.associatedPotentialAssignedList[c]=[]),b.associatedPotentialAssignedList[c].push(a)}}),b.loading=!1},function(a){b.loading=!1,console.log(a)})},b.loadAgenda(),f.registerObserverCallback(function(a){a==Config.publicPages.agenda&&b.loadAgenda()},Config.events.onHeaderNavigatePageChange),b.openMapUrl=function(a){c.open("https://www.google.com.ar/maps/place/"+a.direccion_encuentro)},b.getDayDescription=function(a){return new Date(a).toISOString().substring(8,10)},b.getTimeDescription=function(a){return f.getTimeDescription(a).substring(0,5)},b.getMonthDescription=function(a){return f.getMonthDescription(a.substring(5,7))},b.getDateDescription=function(a){return f.formatDateCompleteTextPlusTime(new Date(a))}}]),angular.module("sancorsaludApp").service("associatedPotentialService",["$http","$rootScope",function(a,b){this.getAssociatedPotentialListForReferents=function(b,c){a({method:"GET",url:Config.api+"PotencialAsociado_ListaParaReferentes"}).then(function(a){a.data.data.hasOwnProperty("potenciales")||c(a),b(a.data.data.potenciales)},function(a){console.log(a),"undefined"!=typeof c&&c(a)})},this.getAssociatedPotentialListForPromoters=function(b,c){a({method:"GET",url:Config.api+"PotencialAsociado_ListaParaPromotores"}).then(function(a){a.data.data.hasOwnProperty("potenciales")||c(a),b(a.data.data.potenciales)},function(a){console.log(a),"undefined"!=typeof c&&c(a)})},this.getAssociatedPotentialPerfil=function(b,c,d){a({method:"GET",url:Config.api+"PotencialAsociado_Perfil/"+b}).then(function(a){a.data.hasOwnProperty("data")||d(a),c(a.data.data)},function(a){console.log(a),"undefined"!=typeof d&&d(a)})},this.motives=[],this.getMotives=function(a,b){return 0!=this.motives.length?a(this.motives):void this.loadMotives(a,b)},this.loadMotives=function(b,c){a({method:"GET",url:Config.api+"PotencialAsociadoMotivos_Mostrar/"}).then(function(a){a.data.data.hasOwnProperty("motivos")||c(a),b(a.data.data.motivos)},function(a){console.log(a),"undefined"!=typeof c&&c(a)})},this.zones=[],this.getZones=function(a,b){return 0==this.zones.length?this.loadZones(a,b):a(this.zones)},this.loadZones=function(b,c){var d=this;a({method:"GET",url:Config.api+"PotencialAsociadoZonas_Listar/"}).then(function(a){a.data.data.hasOwnProperty("zonas")||c(a),d.zones=a.data.data.zonas,b(d.zones)},function(a){console.log(a),"undefined"!=typeof c&&c(a)})},this.updateAssociatedPotential=function(b,c,d){a({method:"PUT",contentType:"application/json",url:Config.api+"PotencialAsociado_Modificar",data:JSON.stringify(b),dataType:"json"}).then(function(a){"undefined"!=typeof c&&c(a.data.data)},function(a){console.log(a),"undefined"!=typeof d&&d(a)})},this.newAssociatedPotential=function(b,c,d){a({method:"POST",contentType:"application/json",url:Config.api+"PotencialAsociado_Agregar",data:JSON.stringify(b),dataType:"json"}).then(function(a){"undefined"!=typeof c&&c(a.data.data)},function(a){console.log(a),"undefined"!=typeof d&&d(a)})},this.closeAssociatedPotential=function(b,c,d,e){a({method:"POST",url:Config.api+"PotencialAsociado_Cerrar",data:{motivo_id:c,potencial_id:b}}).then(function(a){"undefined"!=typeof d&&d(a.data.data)},function(a){console.log(a),"undefined"!=typeof e&&e(a)})},this.saveAssociatedPotentialAgenda=function(b,c,d){a({method:"PUT",url:Config.api+"PotencialAsociado_Agendar",data:JSON.stringify({potencial_id:b.potencial_id,fecha_agenda:b.fecha_agenda,calendario_id:b.calendario_id,notas:b.notas,direccion_encuentro:b.direccion_encuentro}),dataType:"json"}).then(function(a){"undefined"!=typeof c&&c(a.data.data)},function(a){console.log(a),"undefined"!=typeof d&&d(a)})},this.valuedAssociatedPotential=function(b,c,d,e){a({method:"PUT",url:Config.api+"PotencialAsociado_Cotizar",data:JSON.stringify({potencial_id:b.potencial_id,cotizacion_temp:c.plan+"  "+c.value}),dataType:"json"}).then(function(a){"undefined"!=typeof d&&d(a.data.data)},function(a){console.log(a),"undefined"!=typeof e&&e(a)})},this.assignAssociatedToPromoter=function(b,c,d,e){a({method:"PUT",url:Config.api+"PotencialAsociado_AsignarPromotor",data:JSON.stringify({potencial_id:b,promotor_id:c}),dataType:"json"}).then(function(a){"undefined"!=typeof d&&d(a.data.data)},function(a){console.log(a),"undefined"!=typeof e&&e(a)})},this.getPromotersList=function(b,c){a({method:"GET",url:Config.api+"PotencialAsociado_MostrarPromotores"}).then(function(a){a.data.data.hasOwnProperty("promotores")||c(a),b(a.data.data.promotores)},function(a){console.log(a),"undefined"!=typeof c&&c(a)})},this.validateDocumentNumber=function(b,c,d){a({method:"GET",url:Config.api+"PotencialAsociado_VerificarExistencia/"+b}).then(function(a){a.data.data.hasOwnProperty("mensaje")||d(a),c(a.data.data.mensaje)},function(a){console.log(a),"undefined"!=typeof d&&d(a)})},this.getAssignedAndPendingCountForPromoter=function(b,c){a({method:"GET",url:Config.api+"PotencialAsociado_CantidadAsignadosyPendientesPromotor"}).then(function(a){a.data.data.hasOwnProperty("cantidadAsignados")||c(a),b(a.data.data)},function(a){console.log(a),"undefined"!=typeof c&&c(a)})},this.getAssignedAndPendingCountForSupervisor=function(b,c){a({method:"GET",url:Config.api+"PotencialAsociado_CantidadAsignadosyPendientes"}).then(function(a){a.data.data.hasOwnProperty("cantidad_pendientes")||c(a),b(a.data.data)},function(a){console.log(a),"undefined"!=typeof c&&c(a)})}}]),angular.module("sancorsaludApp").controller("TobeassignedcontrollerCtrl",["$rootScope","$scope","$location","associatedPotentialService","UserAuth","utilsService",function(a,b,c,d,e,f){a.setActiveMenuPage("toBeAssigned","Asignados"),a.hideFilterMenu(),a.showSearchMenu(),b.associatedPotentialDialog=$("#asignar"),b.filterSearchedData=function(a){return""==b.filterText?!0:a.nombre.toLowerCase().indexOf(b.filterText.toLowerCase())>=0||a.apellido.toLowerCase().indexOf(b.filterText.toLowerCase())>=0},b.filterText="";var g=function(){b.filterText=a.getSearchText()};f.registerObserverCallback(g,Config.events.onHeaderSearchTextChange),b.loadAssociatedPotential=function(){b.associatedPotentialList=[],b.promoterList=[],e.loggedUserIsSupervisor()&&(b.loading=!0,d.getAssociatedPotentialListForReferents(function(a){b.associatedPotentialList=a.reverse();var c=0;a.forEach(function(a){20==a.estado&&c++});var d="Tienes "+c+" potenciales Asociados sin asignar";$(".supervisor-mensaje").text(d),$("#confirmar").removeClass("open"),b.loading=!1},function(a){b.loading=!1,console.log(a)}),d.getPromotersList(function(a){b.promoterList=a},function(a){console.log(a)}))},b.loadAssociatedPotential(),f.registerObserverCallback(function(a){a==Config.publicPages.toBeAssigned&&b.loadAssociatedPotential()},Config.events.onHeaderNavigatePageChange),b.selectedAssociatedPotencial=null,b.setSelectedAssociatedPotencial=function(a){b.selectedAssociatedPotencial=a},b.isAssigned=function(a){return f.isNotNull(a.promotor_id)},b.getDateToExpireMessage=function(a){return f.isNotNull(a.dias_asig_ref)?a.dias_asig_ref+" días":""},b.assignAssociatedPotentials=function(a){for(var c=$(".item-list").find('input[name="asignar[]"]:not(:disabled):checked'),e=parseInt($('input[name="usuario"]:checked')[0].id.substring("check-promotor".length)),f=[],g=0;g<c.length;g++)f.push(parseInt(c[g].value));d.assignAssociatedToPromoter(f,e,function(a){b.associatedPotentialDialog.modal("toggle"),$(".btn-nav").show(),$("#lista").show(),$("#lista-promotor").hide(),$(".btn-back").hide(),$("#confirmar .step2").hide(),$("#confirmar .step1").show(),b.loadAssociatedPotential()},function(a){b.associatedPotentialDialog.modal("toggle")})},b.getState=function(a){return 1==a.estado?"entrevistado":2==a.estado?"cotizado":3==a.estado?"sin-agendar":void 0}}]),angular.module("sancorsaludApp").service("utilsService",["$http","$rootScope",function(a,b){var c={};this.getDateFromString=function(a){if(void 0==a)return"";var b=parseInt(a.substring(0,4)),c=parseInt(a.substring(5,7)),d=parseInt(a.substring(8,10)),e=new Date(b,c-1,d);return e},this.getDaysBetweenTwoDates=function(a,b){var c=new Date(this.getDateFromString(b)),d=new Date(this.getDateFromString(a)),e=Math.abs(c.getTime()-d.getTime()),f=Math.ceil(e/864e5);return f},this.getStringDate=function(a){return a.toISOString().slice(0,10)},this.isNotNull=function(a){return void 0!=a&&null!=a},this.isNullOrEmpty=function(a){return void 0==a||null==a||0==a.length};var d=[];d[1]="Ene",d[2]="Feb",d[3]="Mar",d[4]="Abr",d[5]="May",d[6]="Jun",d[7]="Jul",d[8]="Ago",d[9]="Sep",d[10]="Oct",d[11]="Nov",d[12]="Dic";var e=[];e[1]="Enero",e[2]="Febrero",e[3]="Marzo",e[4]="Abril",e[5]="Mayo",e[6]="Junio",e[7]="Julio",e[8]="Agosto",e[9]="Septiembre",e[10]="Octubre",e[11]="Noviembre",e[12]="Diciembre";var f=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"];this.getMonthDescription=function(a){return d[parseInt(a)]},this.formatDateDayTextPlusTime=function(a){return f[a.getDay()]+" "+a.getDate()+", "+("00"+a.getHours()).substring(a.getHours().toString().length)+":"+("00"+a.getMinutes()).substring(a.getMinutes().toString().length)+"hs"},this.formatDateCompleteTextPlusTime=function(a){return a.getDate()+" de "+e[a.getMonth()+1]+" de "+a.getFullYear()+", "+("00"+a.getHours()).substring(a.getHours().toString().length)+":"+("00"+a.getMinutes()).substring(a.getMinutes().toString().length)+"hs"},this.getDateDescription=function(a){if(!this.isNotNull(a))return"";var b=new Date(a);return b.toISOString().substring(0,10)},this.getTimeDescription=function(a){if(!this.isNotNull(a))return"";var b=new Date(a);return("00"+b.getHours()).substring(b.getHours().toString().length)+":"+("00"+b.getMinutes()).substring(b.getMinutes().toString().length)},this.buildLocalDateTime=function(a,b){return""==b&&(b="00:00"),b.length>5&&(b=b.substring(0,5)),a.length>10&&(a=a.substring(0,10)),a+"T"+b+":00.000-03:00"},this.getDateStringYYYYMMDD=function(a){var b=new Date;return this.isNotNull(a)&&(b=new Date(a)),b.getFullYear()+"-"+("00"+(b.getMonth()+1)).substring((b.getMonth()+1).toString().length)+"-"+("00"+b.getDate()).substring(b.getDate().toString().length)},this.registerObserverCallback=function(a,b){b.constructor!=Array&&(b=[b]),angular.forEach(b,function(b){c.hasOwnProperty(b)||(c[b]=[]),c[b].push(a)})},this.notifyObservers=function(a,b){angular.forEach(c[a],function(a){a(b)})}}]),angular.module("sancorsaludApp").controller("NewAssociatedPotentialController",["$rootScope","$scope","associatedPotentialService","UserAuth","utilsService","$location",function(a,b,c,d,e,f){b.isSupervisorRole=!1,d.loggedUserIsPromoter()&&a.setActiveMenuPage("newAssociatedPotentialPromoter","Nuevo"),d.loggedUserIsSupervisor()&&(b.isSupervisorRole=!0,a.setActiveMenuPage("newAssociatedPotentialSupervisor","Nuevo")),d.loggedUserIsDataEntry()&&a.setActiveMenuPage("newAssociatedPotentialDataEntry","Nuevo"),a.hideFilterMenu(),a.hideSearchMenu(),b.userMessage="",b.newAssociatedPotential={},b.associatedPotentialDialog=$("#form-dialog"),b.userMessageDialog=$("#message-dialog"),b.zones=[],b.zonesPromotor=[],c.getZones(function(a){b.zones=a,b.zonesPromotor=[];for(var c=0;c<d.getUserData().zona_id;c++)for(var e=0;e<a.length;e++)a[e].zona_id==d.getUserData().zona_id[c]&&b.zonesPromotor.push(a[e])},function(a){console.log(a)}),b.documentNumberValidationMessage="",b.validateDocumentNumber=function(){return void 0==b.newAssociatedPotential.dni||b.newAssociatedPotential.dni.toString().length<1?void(b.documentNumberValidationMessage="Ingrese un nro de documento válido"):(b.newAssociatedPotential.dni.length>8&&(b.newAssociatedPotential.dni=b.newAssociatedPotential.dni.slice(0,8)),void c.validateDocumentNumber(b.newAssociatedPotential.dni,function(a){b.documentNumberValidationMessage=a},function(a){void 0!=a.data&&void 0!=a.data.message?b.documentNumberValidationMessage=a.data.message:b.documentNumberValidationMessage="Ingrese un nro de documento válido"}))},b.createAssociatedPotential=function(){b.userMessage="",d.loggedUserIsSupervisor()===!1&&d.getUserData().zone_id.length>0&&(b.newAssociatedPotential.nro_zona=d.getUserData().zone_id[0]),0==e.isNotNull(b.newAssociatedPotential.fecha_nac)&&delete b.newAssociatedPotential.fecha_nac,c.validateDocumentNumber(b.newAssociatedPotential.dni,function(a){b.newAssociatedPotential.es_empresa="N",b.newAssociatedPotential.es_empresa_boolean===!0&&(b.newAssociatedPotential.es_empresa="S"),void 0!=b.newAssociatedPotential.nro_zona&&(b.newAssociatedPotential.nro_zona=parseInt(b.newAssociatedPotential.nro_zona)),d.loggedUserIsPromoter()&&(b.newAssociatedPotential.promotor_id=d.getUserData()._id),d.loggedUserIsSupervisor()&&(b.newAssociatedPotential.referente_id=d.getUserData()._id),c.newAssociatedPotential(b.newAssociatedPotential,function(a){b.associatedPotentialDialog.modal("toggle"),d.loggedUserIsSupervisor()?f.url(Config.publicPages.toBeAssigned):f.url(Config.publicPages.assignedToPromoter)},function(a){b.userMessage="No se ha podido crear el potencial asociado",b.associatedPotentialDialog.modal("toggle"),setTimeout(function(){b.userMessageDialog.modal("toggle")},500)})},function(a){b.userMessage="Verifique que el número de documento sea válido",void 0!=a.data&&void 0!=a.data.message&&(b.userMessage+=". "+a.data.message),b.associatedPotentialDialog.modal("toggle"),setTimeout(function(){b.userMessageDialog.modal("toggle")},500)})}}]),angular.module("sancorsaludApp").controller("PromoterListController",["$rootScope","$scope","associatedPotentialService","UserAuth","utilsService",function(a,b,c,d,e){a.setActiveMenuPage("promoterList","Asesores"),a.hideFilterMenu(),a.showSearchMenu(),b.loading=!1,b.filterSearchedData=function(a){return""==b.filterText?!0:a.nombre.toLowerCase().indexOf(b.filterText.toLowerCase())>=0||a.apellido.toLowerCase().indexOf(b.filterText.toLowerCase())>=0},b.filterText="";var f=function(){b.filterText=a.getSearchText()};e.registerObserverCallback(f,Config.events.onHeaderSearchTextChange),b.loadPromoterList=function(){b.promoterList=[],d.loggedUserIsSupervisor()&&(b.loading=!0,c.getPromotersList(function(a){b.promoterList=a,b.loading=!1},function(a){b.loading=!1,console.log(a)}))},b.loadPromoterList(),e.registerObserverCallback(function(a){a==Config.publicPages.promoterList&&b.loadPromoterList()},Config.events.onHeaderNavigatePageChange)}]);var Config={api:"https://testservicios.sancorsalud.com.ar/asociados/api/",apiAuthorization:"121212121221",roleNameSupervisor:"referente_zona",roleNamePromoter:"promotor",roleNameDataEntry:"datero",maxDaysPotentialCanBeAssigned:30,refreshNotificationsMilliseconds:1e4,events:{onHeaderSearchTextChange:"onHeaderSearchTextChange",onHeaderNavigatePageChange:"onHeaderNavigatePageChange"},publicPages:{agenda:"/agenda",about:"/acerca",login:"/inicio",newAssociatedPotential:"/nuevo",assignedToPromoter:"/asignados",promoterList:"/asesores",toBeAssigned:"/asignaciones"}};angular.module("sancorsaludApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/agenda.html",'<div class="bg-menu"></div> <section class="content agenda"> <div class="container"> <p ng-if="loading"><i class="fa fa-refresh fa-spin"></i> Cargando la lista de potenciales asociados agendados...</p> <p ng-if="!loading && Object.keys(associatedPotentialAssignedList).length == 0">No tienes ningun potencial agendado aún, por favor agenda alguno.</p> <div ng-repeat="(fecha, potentialList) in associatedPotentialAssignedList"> <div class="row"> <div class="col-md-1"> <div class="fecha">{{getDayDescription(fecha)}}<span> {{getMonthDescription(fecha)}}</span></div> </div> <div class="col-md-11"> <div class="item-list"> <div class="row"> <div class="col-xs-12"> <div ng-repeat="associatedPotential in potentialList | filter: filterSearchedData"> <article class="item" data-filter="{{getState(associatedPotential)}}"> <div class="item-text" data-modalnum="asignado1" ng-click="setSelectedAssociatedPotencial(associatedPotential)"> <div class="nombre">{{associatedPotential.nombre}} {{associatedPotential.apellido}}</div> <div class="datos">{{getDateDescription(associatedPotential.fecha_agenda)}}</div> <div class="descripcion">{{associatedPotential.direccion_encuentro}}</div> </div> <div class="item-icons"> <i ng-show="associatedPotential.dias_asig_ref<=1" class="material-icons error">report_problem</i> <button type="button" class="btn-cal" ng-click="openMapUrl(associatedPotential)"><i class="material-icons">place</i></button> </div> </article> </div> </div> </div> </div> </div> </div> </div> </div></section>'),
a.put("views/assignedToPromoter.html",'<div class="bg-menu"></div> <section class="content"> <div class="container"> <div class="row"> <div class="col-md-12"> <div class="supervisor-mensaje">{{welcomeMessage}}</div> </div> <div class="col-md-12"> <div class="filtro"> <div class="sin-agendar"> <i class="material-icons">event_note</i>Sin agendar <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> <div class="entrevistados"> <i class="material-icons">assignment_turned_in</i>Agendados <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> <div class="cotizados"> <i class="material-icons">monetization_on</i>Cotizados <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> </div> <div class="item-list"> <div class="row"> <div class="col-xs-12"> <p ng-if="loading"><i class="fa fa-refresh fa-spin"></i> Cargando la lista de potenciales asociados asignados...</p> <p ng-if="!loading && associatedPotentialList.length == 0">No tienes ningun potencial asignado aún, por favor solicitale a tu supervisor.</p> <div ng-repeat="associatedPotential in associatedPotentialList | filter: filterSearchedData"> <article class="item" data-filter="{{getState(associatedPotential)}}"> <div class="item-text" data-modalnum="asignado1" ng-click="setSelectedAssociatedPotencial(associatedPotential)"> <div class="nombre">{{associatedPotential.nombre}} {{associatedPotential.apellido}}</div> <div class="datos">{{associatedPotential.edad}} años</div> <div class="descripcion"><span>{{getDetailsMessage(associatedPotential)}}</span></div> </div> <div class="item-icons"> <i ng-show="showIconWarningExpiredDate(associatedPotential)" class="material-icons error">report_problem</i> <button ng-show="showIconNotAgenda(associatedPotential)===true" type="button" class="btn-cal"><i class="material-icons">event_note</i></button> <button ng-show="showIconAgenda(associatedPotential)===true" type="button" class="btn-cal"><i class="material-icons">assignment_turned_in</i></button> <button ng-show="showIconValued(associatedPotential)===true" type="button" class="btn-cal"><i class="material-icons">monetization_on</i></button> </div> </article> </div> </div> </div> </div> </div> </div> </div> </section> <div id="asignado1" class="modal fade asignados" tabindex="-1"> <div class="modal-dialog"> <div class="modal-header"> <h3></h3> <button type="button" ng-if="modeEditActive===false" name="button" class="edit" ng-click="editAssociatedPotential()"><i class="material-icons">mode_edit</i></button> </div> <div class="modal-content"> <div class="modal-body" ng-if="modeEditActive"> <form action="#"> <div class="form-group label-floating"> <label for="fecha-nacimiento" class="control-label">Fecha de Nacimiento</label> <input type="date" max="{{today}}" ng-value="{{getDateDescription(selectedAssociatedPotencial.fecha_agenda)}}" class="form-control" id="fecha-nacimiento" name="fecha-nacimiento" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="cod-postal" class="control-label">Código Postal</label> <input type="text" class="form-control" id="cod-postal" ng-model="selectedAssociatedPotencial.perfil.cp" name="cod-postal"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="tel" class="control-label">Número de teléfono fijo</label> <input type="text" maxlength="30" class="form-control" id="tel" ng-model="selectedAssociatedPotencial.perfil.tel" name="tel"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="cel" maxlength="30" class="control-label">Número de teléfono celular</label> <input type="text" class="form-control" id="cel" ng-model="selectedAssociatedPotencial.perfil.celular" name="cel"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="mail" class="control-label">Mail</label> <input type="mail" maxlength="100" class="form-control" id="mail" ng-model="selectedAssociatedPotencial.mail" name="mail" max="99999"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="street" class="control-label">Calle</label> <input type="text" maxlength="60" class="form-control" id="street" ng-model="selectedAssociatedPotencial.perfil.calle" name="street"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="door" class="control-label">Puerta</label> <input type="number" maxlength="5" class="form-control" id="door" ng-model="selectedAssociatedPotencial.perfil.puerta" max="99999" name="door"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="floor" class="control-label">Piso</label> <input type="number" maxlength="5" class="form-control" id="floor" ng-model="selectedAssociatedPotencial.perfil.piso" max="99999" name="floor"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="department" class="control-label">Departamento</label> <input type="text" maxlength="2" class="form-control" id="department" ng-model="selectedAssociatedPotencial.perfil.departamento" name="department"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="clearfix"></div> </form> <div class="botones"> <div>{{userMessage}}</div> <button class="btn modificar" ng-click="cancelEditAssociatedPotential()">Cancelar</button> <button class="btn modificar" ng-click="updateAssociatedPotential()">Aceptar</button> </div> </div> </div> <div class="modal-content" ng-if="modeEditActive===false"> <div class="modal-body"> <div class="item"> <div class="icono"><i class="material-icons">perm_contact_calendar</i></div> <p>{{selectedAssociatedPotencial.edad}} años ({{getDateDescription(selectedAssociatedPotencial.fecha_nac)}})<span>Edad</span></p> <div class="clearfix"></div> </div> <div class="item"> <div class="icono"><i class="material-icons">phone</i></div> <p>{{selectedAssociatedPotencial.perfil.celular}} <span>Móvil</span></p> <p>{{selectedAssociatedPotencial.perfil.tel}} <span>Casa</span></p> <div class="clearfix"></div> </div> <div class="item"> <div class="icono"><i class="material-icons">email</i></div> <p>{{selectedAssociatedPotencial.perfil.mail}} <span>Personal</span></p> <div class="clearfix"></div> </div> <div class="item"> <div class="icono"><i class="material-icons">place</i></div> <p>{{selectedAssociatedPotencial.direccion}}<br> <span>Home</span></p> <div class="clearfix"></div> </div> <div ng-if="selectedAssociatedPotencial.plan!=undefined" class="item"> <div class="icono"><i class="material-icons">healing</i></div> <p>{{selectedAssociatedPotencial.plan}}<br> <span>Plan</span></p> <div class="clearfix"></div> </div> <div ng-if="selectedAssociatedPotencial.cotizacion!=undefined" class="item"> <div class="icono"><i class="material-icons">attach_money</i></div> <p>{{selectedAssociatedPotencial.cotizacion}}<br> <span>Cotización</span></p> <div class="clearfix"></div> </div> <form action="#"> <div class="icono"><i class="material-icons">event_note</i></div> <div class="form-group label-floating"> <label for="fecha-entrevista" class="control-label">Fecha de Entrevista</label> <input min="{{today}}" ng-value="{{getDateDescription(selectedAssociatedPotencial.fecha_agenda)}}" type="date" class="form-control" id="fecha-entrevista" name="fecha-entrevista" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="clearfix"></div> <div class="icono"><i class="material-icons">alarm</i></div> <div class="form-group label-floating"> <label for="hora-entrevista" class="control-label">Hora de Entrevista</label> <input ng-value="{{getTimeDescription(selectedAssociatedPotencial.fecha_agenda)}}" type="time" class="form-control" id="hora-entrevista" name="hora-entrevista" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="clearfix"></div> <div class="icono"><i class="material-icons">place</i></div> <div class="form-group label-floating"> <label for="direccion" class="control-label">Dirección de Entrevista</label> <input type="text" maxlength="200" ng-model="selectedAssociatedPotencial.direccion_encuentro" class="form-control" id="direccion" name="direccion" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="clearfix"></div> <div class="icono"><i class="material-icons">assignment</i></div> <div class="form-group label-floating"> <label for="notas" class="control-label">Notas</label> <input ng-model="selectedAssociatedPotencial.notas" type="text" maxlength="1000" class="form-control" id="notas" name="notas"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="clearfix"></div> </form> <div class="botones"> <div>{{userMessage}}</div> <button class="cerrar-caso btn" onclick="$(\'#close-dialog\').modal(\'toggle\')">Cerrar Caso</button> <button class="btn cotizar">Cotizar</button> <button class="btn modificar" ng-click="saveAssociatedPotentialAgenda()">Agendar</button> </div> <div class="cotizar-modal" style="display:none"> <p>Vas a cotizar para <span class="name"></span></p> <div class="form-group label-floating"> <label for="plan-value" class="control-label">Plan</label> <input type="text" ng-model="valuation.plan" class="form-control" id="plan-value" name="plan-value" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="costo-value" class="control-label">Costo $</label> <input type="text" ng-model="valuation.value" class="form-control" id="costo-value" name="costo-value" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <button class="btn cotizar-ok" ng-click="valuedAssociatedPotential()">Aceptar</button> <button class="btn cerrar">Cerrar</button> </div> </div> </div> </div> </div> <div id="close-dialog" class="modal fade" tabindex="-1" style=""> <div class="modal-content"> <div class="modal-body"> <div class="row"> <div class="col-md-12"> <p>Indica un motivo por el cual desea cerrar el caso:</p> <div class="form-group label-floating"> <form action="#"> <select class="form-control" name="motive" id="motive" ng-model="selectedAssociatedPotencial.motive" required> <option value="">--Select--</option> <option ng-repeat="option in motives" value="{{option.id}}">{{option.motivo}}</option> </select> </form> <button class="btn cerrar" onclick="$(\'#close-dialog\').modal(\'toggle\')">Cancelar</button> <button class="btn cerrar" ng-click="closeAssociatedPotential()">Confirmar</button> </div> </div> </div> </div> </div> </div> <script>jQuery(function ($) {\n    var $inputs = $(\'input[name=tel],input[name=cel]\');\n    $inputs.on(\'input\', function () {\n      // Sets the required property of the other input to false if this input is not empty.\n      $inputs.not(this).prop(\'required\', !$(this).val().length);\n    });\n  });</script>'),a.put("views/login.html",'<section class="login"> <form class="login"> <img src="images/logo.299832aa.png" alt="" class="logo"> <div class="form-group label-floating"> <label for="user" class="control-label">Usuario</label> <input type="text" class="form-control" id="user" ng-model="userData.username" name="user" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="pass" class="control-label">Contraseña</label> <input type="password" class="form-control" id="pass" name="pass" ng-model="userData.password" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <button class="btn" ng-click="doLogin()">Ingresar</button> <div class="clearfix">{{message}}</div> </form> </section>'),a.put("views/newAssociatedPotential.html",'<div class="bg-menu"></div> <section class="cargar content"> <div class="container"> <div class="row"> <div class="col-md-12"> <div class="qr visible-xs"> <div class="btn btn-qr">LEER CÓDIGO QR</div> </div> <form id="supervisor-cargar"> <div class="form-group label-floating"> <label for="name" class="control-label">Nombre</label> <input type="text" maxlength="100" class="form-control" id="name" ng-model="newAssociatedPotential.nombre" name="name" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="lastName" class="control-label">Apellido</label> <input type="text" maxlength="50" class="form-control" id="lastName" ng-model="newAssociatedPotential.apellido" name="apellido" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="dni" class="control-label">DNI</label> <input type="number" class="form-control" maxlength="8" ng-change="validateDocumentNumber()" id="dni" ng-model="newAssociatedPotential.dni" max="99999999" name="dni" required> <span class="help"><b>{{documentNumberValidationMessage}}</b></span> </div> <div class="form-group label-floating"> <label for="fecha-nacimiento" class="control-label">Fecha de Nacimiento</label> <input type="date" class="form-control" id="fecha-nacimiento" ng-model="newAssociatedPotential.fecha_nac" name="fecha-nacimiento"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="cod-postal" class="control-label">Código Postal</label> <input type="text" maxlength="5" class="form-control" id="cod-postal" ng-model="newAssociatedPotential.cp" name="cod-postal"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="tel" class="control-label">Número de teléfono fijo</label> <input type="text" maxlength="30" class="form-control" id="tel" ng-model="newAssociatedPotential.tel" name="tel" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="cel" class="control-label">Número de teléfono celular</label> <input type="text" maxlength="30" class="form-control" id="cel" ng-model="newAssociatedPotential.cel" name="cel" required> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="mail" class="control-label">Mail</label> <input type="mail" maxlength="100" class="form-control" id="mail" ng-model="newAssociatedPotential.mail" name="mail" max="99999"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating" ng-if="isSupervisorRole===true"> <label for="zone" class="control-label">Zona</label> <select class="form-control" name="zone" id="zone" ng-model="newAssociatedPotential.nro_zona"> <option value="">--Select--</option> <option ng-repeat="option in zones" value="{{option.zona_id}}">{{option.descripcion_zona}}</option> </select> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="street" class="control-label">Calle</label> <input type="text" maxlength="60" class="form-control" id="street" ng-model="newAssociatedPotential.calle" name="street"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="door" class="control-label">Nro</label> <input type="number" maxlength="5" class="form-control" id="door" ng-model="newAssociatedPotential.puerta" max="99999" name="door"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="floor" class="control-label">Piso</label> <input type="number" maxlength="5" class="form-control" id="floor" ng-model="newAssociatedPotential.piso" max="99999" name="floor"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="department" class="control-label">Departamento</label> <input type="text" maxlength="2" class="form-control" id="department" ng-model="newAssociatedPotential.departamento" name="department"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="company" class="control-label">Es Empresa</label> <input type="checkbox" class="form-control" id="company" ng-model="newAssociatedPotential.es_empresa_boolean" name="company"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <div class="form-group label-floating"> <label for="comment" class="control-label">Comentario</label> <input type="text" maxlength="1000" class="form-control" id="comment" ng-model="newAssociatedPotential.comentario" name="comment"> <!-- <span class="help-block">This is a hint as a <code>span.help-block.hint</code></span> --> </div> <button type="submit" class="btn btn-enviar">Cargar</button> </form> </div> </div> </div> </section> <div id="message-dialog" class="modal fade" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-body"> <p>{{userMessage}}</p> </div> </div> </div> </div> <div id="form-dialog" class="modal fade" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-body"> <p>Vas a cargar como potencial asociado a</p> <p class="nombre" style="font-weight:800"></p> <p class="dni"></p> <p class="fecha-nacimiento"></p> <p class="cod-postal"></p> <p class="tel"></p> <p class="cel"></p> <p class="mail"></p> <div class="botones"> <div class="btn cerrar">cancelar</div> <div ng-click="createAssociatedPotential()" class="btn enviar">aceptar</div> </div> </div> </div> </div> </div> <script>jQuery( function( $ ) {\n    var $inputs = $( \'input[name=tel],input[name=cel]\' );\n    $inputs.on( \'input\', function() {\n      // Sets the required property of the other input to false if this input is not empty.\n      $inputs.not( this ).prop( \'required\', !$( this ).val().length );\n    } );\n  } );</script>'),a.put("views/promoterlist.html",'<div class="bg-menu"></div> <section class="content"> <div class="container"> <div class="row"> <div class="col-md-12"> <div class="filtro"> <div class="sin-agendar"> <i class="material-icons">event_note</i>Sin agendar <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> <div class="entrevistados"> <i class="material-icons">assignment_turned_in</i>Entrevistados <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> <div class="cotizados"> <i class="material-icons">monetization_on</i>Cotizados <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> </div> <div class="item-list" id="lista"> <div class="row"> <div class="col-xs-12"> <p ng-if="loading"><i class="fa fa-refresh fa-spin"></i> Cargando la lista de asesores...</p> <p ng-if="!loading && promoterList.length == 0">No hay ningún asesor.</p> <div ng-repeat="promoter in promoterList | filter: filterSearchedData"> <article class="item"> <div class="column col-xs-10"> <div class="row"> <div class="item-text"> <div class="nombre">{{promoter.nombre}} {{promoter.apellido}}</div> {{promoter.descripcion}} </div> </div> </div> <div class="column col-xs-2"> <div class="row"> Asignados <div class="badge-notification" title="Asignados">{{promoter.pot_asignados}}</div> </div> <div class="row"> Históricos <div class="badge-notification blue" title="Históricos">{{promoter.pot_historica}}</div> </div> </div> </article> </div> </div> </div> </div> </div> </div> </div> </section>'),a.put("views/templates/headerTemplate.html",'<div class="header"> <nav class="menu"> <div class="head"> <img src="images/logo.299832aa.png" alt=""> <h3 class="name">{{username}}</h3> </div> <ul ng-show="showSupervisorMenu"> <li id="toBeAssignedMenu" ng-click="reload(getPublicPages().toBeAssigned)" class="active"><a style="display: inline-block" href="/#{{getPublicPages().toBeAssigned}}"><i class="material-icons">check_box</i>Asignaciones</a> <div class="badge-notification">{{notifications.assignedCount}}</div> <div class="badge-notification blue">{{notifications.pendingCount}}</div> </li> <li id="newAssociatedPotentialSupervisorMenu"><a href="/#{{getPublicPages().newAssociatedPotential}}"><i class="material-icons">person_add</i>Cargar potencial asociado</a> </li> <li id="promoterListMenu" ng-click="reload(getPublicPages().promoterList)"><a href="/#{{getPublicPages().promoterList}}"><i class="material-icons">group</i>Asesores Comerciales</a> </li> <li style="display: none" id="logoutMenu"><a href="#"><i class="material-icons">assignment</i>Reportes</a></li> <li style="display: none" id="logoutMenu"><a href="#"><i class="material-icons">list</i>Motivos de eliminación</a></li> <li style="display: none" id="logoutMenu"><a href="#"><i class="material-icons">monetization_on</i>Cotización manual</a></li> <li id="logoutMenu"><a href="#" ng-click="logout()"><i class="material-icons">exit_to_app</i>Salir</a></li> </ul> <ul ng-show="showPromoterMenu"> <li id="assignedToPromoterMenu" ng-click="reload(getPublicPages().assignedToPromoter)" class="active"><a style="display: inline-block" href="/#{{getPublicPages().assignedToPromoter}}"><i class="material-icons">check_box</i>Asignados</a> <div class="badge-notification">{{notifications.pendingCount}}</div> </li> <li id="newAssociatedPotentialPromoterMenu"><a href="/#{{getPublicPages().newAssociatedPotential}}"><i class="material-icons">person_add</i>Cargar potencial asociado</a> </li> <li id="agendaMenu" ng-click="reload(getPublicPages().agenda)"><a href="/#{{getPublicPages().agenda}}"><i class="material-icons">event_note</i>Agenda</a></li> <li id="logoutMenu"><a href="#" ng-click="logout()"><i class="material-icons">exit_to_app</i>Salir</a></li> </ul> <ul ng-show="showDataEntryMenu"> <li id="newAssociatedPotentialDataEntryMenu"><a href="/#{{getPublicPages().newAssociatedPotential}}"><i class="material-icons">person_add</i>Cargar potencial asociado</a></li> <li id="logoutMenu"><a href="#" ng-click="logout()"><i class="material-icons">exit_to_app</i>Salir</a></li> </ul> </nav> <button type="button" name="button" class="btn btn-menu btn-nav"><i class="material-icons">menu</i> <h3>{{page}}</h3></button> <button type="button" name="button" class="btn btn-menu btn-search"><i class="material-icons">arrow_back</i> <h3>Volver</h3></button> <button type="button" name="button" class="btn btn-menu btn-back blanco" style="display: none"><i class="material-icons">arrow_back</i> <h3>Asignaciones</h3> <div class="ripple-container"> <div class="ripple ripple-on ripple-out" style="left: 41px; top: 23px; background-color: rgba(0, 0, 0, 0.870588); transform: scale(26.625)"></div> </div> </button> <div class="container"> <div class="row"> <div class="col-md-12"> <form class="search" ng-if="isSearchMenuVisible"> <button type="button" name="button" ng-click="doLogin()" class="btn hidden-xs"><i class="material-icons">search</i> </button> <input type="text" ng-change="changeSearchText(searchText)" placeholder="Buscar" ng-model="searchText" class="hidden-xs"> <input type="text" ng-change="changeSearchText(searchText)" placeholder="Buscar" ng-model="searchText" class="smart visible-xs"> </form> <div class="filtros dropdown"> <button ng-if="isFilterMenuVisible" type="button" name="button" class="btn btn-filter dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><i class="material-icons">more_vert</i> <div class="ripple-container"></div> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li><a id="sin-agendar" href="#"><i class="material-icons">event_note</i>Sin agendar <div class="ripple-container"></div> </a></li> <li><a id="entrevistados" href="#"><i class="material-icons">assignment_turned_in</i>Agendados</a></li> <li><a id="cotizados" href="#"><i class="material-icons">monetization_on</i>Cotizados</a></li> </ul> </div> </div> </div> </div> <button type="button" name="button" class="btn smart-search visible-xs"><i class="material-icons">search</i></button> <div class="user hidden-xs"> <i class="material-icons">account_circle</i> <div class="name" title="{{username}}">{{ username | limitTo: 13 }}{{username.length > 13 ? \'...\' : \'\'}}</div> </div> </div>'),a.put("views/toBeAssigned.html",'<div class="bg-menu"></div> <div id="confirmar"> <i class="material-icons step1">check</i> <i class="material-icons step2" style="display:none">check</i> </div> <section class="content"> <div class="container"> <div class="row"> <div class="col-md-12"> <div class="supervisor-mensaje"> </div> </div> <div class="col-md-12"> <div class="filtro"> <div class="sin-agendar"> <i class="material-icons">event_note</i>Sin agendar <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> <div class="entrevistados"> <i class="material-icons">assignment_turned_in</i>Entrevistados <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> <div class="cotizados"> <i class="material-icons">monetization_on</i>Cotizados <div class="cerrar">Limpiar filtro <i class="material-icons">close</i> </div> </div> </div> <div class="item-list" id="lista"> <div class="row"> <div class="col-xs-12"> <p ng-if="loading===true"><i class="fa fa-refresh fa-spin"></i> Cargando lista de potenciales asociados... </p> <p ng-if="loading===false && associatedPotentialList.length == 0">No tienes ningun potencial asociado para asignar</p> <div ng-repeat="associatedPotential in associatedPotentialList | filter: filterSearchedData"> <article class="item" data-filter="{{getState(associatedPotential)}}"> <div class="checkbox"> <input ng-if="isAssigned(associatedPotential)===false" type="checkbox" name="asignar[]" value="{{associatedPotential.potencial_id}}" id="check{{associatedPotential.potencial_id}}"> <input ng-if="isAssigned(associatedPotential)===true" type="checkbox" name="asignar[]" value="{{associatedPotential.potencial_id}}" id="check{{associatedPotential.potencial_id}}" checked disabled> <label style="font-size: 22px" for="check{{associatedPotential.potencial_id}}"></label> </div> <div class="item-text" data-modalnum="asignado1"> <div class="nombre">{{associatedPotential.nombre}} {{associatedPotential.apellido}}</div> <div class="datos">{{associatedPotential.edad}} años</div> <div class="descripcion"><span>{{getDateToExpireMessage(associatedPotential)}}</span></div> </div> <div class="item-icons"> <!-- <i class="material-icons error">report_problem</i> --> <button ng-if="isAssigned(associatedPotential)===false" type="button" class="btn-cal"><i class="material-icons error">flag</i></button> </div> </article> </div> </div> </div> </div> <div id="lista-promotor" class="item-list"> <div ng-repeat="promoter in promoterList"> <article class="item"> <div class="column col-xs-10"> <div class="row"> <div class="column col-xs-1"> <div class=""> <input type="radio" name="usuario" value="{{promoter.nombre}} {{promoter.apellido}}" id="check-promotor{{promoter.promotor_id}}" data-name="{{promoter.nombre}} {{promoter.apellido}}"> <label for="check-promotor{{promoter.promotor_id}}"></label> </div> </div> <div class="column col-xs-11"> <div class="item-text"> <div class="nombre">{{promoter.nombre}} {{promoter.apellido}}</div> <div class="datos">{{promoter.description}}</div> </div> </div> </div> </div> <div class="column col-xs-2"> <div class="row"> Asignados <div class="badge-notification" title="Asignados">{{promoter.pot_asignados}}</div> </div> <div class="row"> Históricos <div class="badge-notification blue" title="Históricos">{{promoter.pot_historica}}</div> </div> </div> </article> </div> </div> </div> </div> </div> </section> <div id="asignar" class="modal fade asignados" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-body"> <p>Vas a cotizar para <span class="name"></span></p> <button class="btn cotizar-ok" ng-click="assignAssociatedPotentials()">Aceptar</button> <button class="btn cerrar" onclick="$(\'#asignar\').modal(\'toggle\')">Cancelar</button> <div class="clearfix"></div> </div> </div> </div> </div>')}]);